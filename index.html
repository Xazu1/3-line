<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>3 Point | Daily Reflection</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts: Added Japanese Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Noto+Sans+JP:wght@300;400;500&family=Noto+Serif+JP:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">

    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="min-h-screen flex flex-col relative selection:bg-white/20 selection:text-white">

    <!-- Ambient Elements -->
    <div class="noise-overlay"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <!-- Header -->
    <header
        class="fixed top-0 w-full z-40 px-6 py-6 flex justify-between items-center backdrop-blur-sm bg-black/20 border-b border-white/5">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 border border-white/20 rounded-full flex items-center justify-center">
                <span class="serif italic font-bold text-lg">3</span>
            </div>
            <span class="tracking-widest text-xs mono uppercase text-white/60">Three Point</span>
        </div>

        <nav class="flex bg-white/5 rounded-full p-1 border border-white/10 backdrop-blur-md">
            <button id="nav-new"
                class="nav-btn active px-5 py-2 rounded-full text-xs font-medium transition-all duration-300 text-white/40 hover:text-white"
                onclick="switchView('new')">
                記録する
            </button>
            <button id="nav-history"
                class="nav-btn px-5 py-2 rounded-full text-xs font-medium transition-all duration-300 text-white/40 hover:text-white"
                onclick="switchView('history')">
                履歴
            </button>
        </nav>
    </header>

    <!-- Main Content Container -->
    <main class="flex-grow pt-28 pb-10 px-4 md:px-0 w-full max-w-4xl mx-auto relative perspective-1000">

        <!-- VIEW: NEW ENTRY -->
        <section id="view-new" class="w-full relative z-10">
            <div class="mb-12 text-center md:text-left md:pl-6">
                <p class="mono text-xs text-white/40 mb-2 tracking-wider" id="current-date">TODAY</p>
                <h1 class="text-4xl md:text-5xl font-light serif leading-tight">
                    Daily <span class="italic text-white/30">Reflection</span>
                </h1>
                <p class="text-white/30 text-sm mt-2 font-light">今日一日を、3つの視点で振り返る</p>
            </div>

            <form id="reflection-form" class="space-y-12 md:pl-6">

                <!-- Point 1: Event -->
                <div class="input-group group relative">
                    <label
                        class="block mono text-xs uppercase tracking-widest mb-4 text-[var(--accent-event)] flex items-center gap-2 font-bold">
                        <i data-lucide="circle" class="w-3 h-3"></i> 01. Event (事実)
                    </label>
                    <textarea id="input-event" rows="1"
                        class="w-full bg-transparent text-xl md:text-2xl placeholder-white/10" style="color: #d1d5db;"
                        placeholder="今日、客観的に何が起きましたか?"></textarea>
                    <p
                        class="text-xs text-white/20 mt-2 pl-6 opacity-0 group-focus-within:opacity-100 transition-opacity duration-500">
                        感情を抜きにして、事実・データだけに目を向けましょう。</p>
                </div>

                <!-- Point 2: Win -->
                <div class="input-group group relative">
                    <label
                        class="block mono text-xs uppercase tracking-widest mb-4 text-[var(--accent-win)] flex items-center gap-2 font-bold">
                        <i data-lucide="sparkles" class="w-3 h-3"></i> 02. Win (成果・発見)
                    </label>
                    <textarea id="input-win" rows="1"
                        class="w-full bg-transparent text-xl md:text-2xl placeholder-white/10" style="color: #fcd34d;"
                        placeholder="うまくいったこと、学んだことは?"></textarea>
                    <p
                        class="text-xs text-white/20 mt-2 pl-6 opacity-0 group-focus-within:opacity-100 transition-opacity duration-500">
                        些細なことでも構いません。小さな一歩も大切な「勝利」です。</p>
                </div>

                <!-- Point 3: Next -->
                <div class="input-group group relative">
                    <label
                        class="block mono text-xs uppercase tracking-widest mb-4 text-[var(--accent-next)] flex items-center gap-2 font-bold">
                        <i data-lucide="arrow-right" class="w-3 h-3"></i> 03. Next (次への一手)
                    </label>
                    <textarea id="input-next" rows="1"
                        class="w-full bg-transparent text-xl md:text-2xl placeholder-white/10" style="color: #60a5fa;"
                        placeholder="次に具体的などのようなアクションを起こしますか?"></textarea>
                    <p
                        class="text-xs text-white/20 mt-2 pl-6 opacity-0 group-focus-within:opacity-100 transition-opacity duration-500">
                        建設的で、未来につながる具体的な行動を書きましょう。</p>
                </div>

                <!-- Optional Star (Today's Special Satisfaction) -->
                <div class="input-group satisfaction-toggle">
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <div class="relative">
                            <input type="checkbox" id="input-satisfied" class="sr-only peer">
                            <div class="toggle-bg w-11 h-6 bg-white/10 rounded-full 
                                        peer-checked:bg-amber-500/50 transition-all duration-300
                                        border border-white/20 peer-checked:border-amber-500"></div>
                            <div class="toggle-dot absolute left-1 top-1 w-4 h-4 bg-white/60 
                                        rounded-full transition-all duration-300
                                        peer-checked:translate-x-5 peer-checked:bg-amber-400"></div>
                        </div>
                        <span class="mono text-xs text-white/50 group-hover:text-white/80 transition-colors">
                            <i data-lucide="star" class="w-3 h-3 inline-block mr-1"></i>
                            今日特別満意
                        </span>
                    </label>
                </div>

                <!-- Submit Button -->
                <div class="pt-8 flex justify-end">
                    <button type="submit"
                        class="group relative overflow-hidden bg-white text-black px-8 py-4 rounded-sm font-medium transition-all hover:bg-gray-200">
                        <span class="relative z-10 flex items-center gap-2 font-medium">
                            保存する <i data-lucide="arrow-right"
                                class="w-4 h-4 transition-transform group-hover:translate-x-1"></i>
                        </span>
                    </button>
                </div>
            </form>
        </section>

        <!-- VIEW: HISTORY -->
        <section id="view-history" class="hidden w-full relative z-10">
            <div
                class="mb-8 text-center md:text-left px-2 flex flex-col md:flex-row md:items-end justify-between gap-6">
                <div>
                    <h1 class="text-4xl md:text-5xl font-light serif leading-tight">
                        Your <span class="italic text-white/30">Journey</span>
                    </h1>
                    <p class="text-white/30 text-sm mt-2 font-light">積み重ねた思考の軌跡</p>
                </div>
                <!-- Heatmap Container -->
                <div id="heatmap-container"
                    class="flex gap-2 items-end opacity-60 hover:opacity-100 transition-opacity">
                    <div
                        class="flex flex-col justify-between text-[8px] mono text-white/30 h-[78px] py-1 text-right pr-1">
                        <span>Mon</span><span>Wed</span><span>Fri</span>
                    </div>
                    <div id="heatmap-grid" class="heatmap-grid">
                        <!-- Heatmap cells generated by JS -->
                    </div>
                </div>
            </div>

            <div id="history-list" class="flex flex-col gap-4 pb-20 px-2">
                <!-- Collapsible Cards will be injected here JS -->
            </div>

            <div id="empty-state" class="hidden text-center py-20 opacity-50">
                <p class="text-sm font-light">まだ記録がありません。今日から始めましょう。</p>
            </div>
        </section>

    </main>

    <!-- Success Modal Overlay -->
    <div id="success-overlay"
        class="fixed inset-0 z-50 pointer-events-none flex items-center justify-center opacity-0 bg-black/80 backdrop-blur-sm">
        <div class="text-center transform scale-90" id="success-content">
            <div
                class="w-20 h-20 rounded-full border border-[var(--accent-win)] flex items-center justify-center mx-auto mb-6 text-[var(--accent-win)]">
                <i data-lucide="check" class="w-10 h-10"></i>
            </div>
            <h2 class="serif text-3xl italic mb-2">Saved</h2>
            <p class="text-xs text-white/50 uppercase tracking-widest font-medium">自信が積み重なりました</p>
        </div>
    </div>

    <!-- External JavaScript -->
    <script src="script.js" defer></script>
</body>

</html>